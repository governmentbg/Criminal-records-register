<nb-card>
  <igx-grid
    #decisionsGrid
    [pinning]="pinningConfig"
    [height]="null"
    [data]="historyData"
    [primaryKey]="'id'"
  >
    <igx-grid-toolbar>
      <igx-grid-toolbar-title>
        <span class="fw-bold">Проверка в регистри</span></igx-grid-toolbar-title
      >
      <igx-grid-toolbar-actions>
        <div class="d-flex gap-2">
          <igx-grid-toolbar-hiding class="mt-1"></igx-grid-toolbar-hiding>
        </div>
      </igx-grid-toolbar-actions>
    </igx-grid-toolbar>
    <igx-column
      field="createdOn"
      [sortable]="true"
      header="Дата"
      dataType="Date"
      [formatter]="this.dateFormatService.formatDate"
    >
      <ng-template igxCell let-cell="cell">
        <span [title]="this.dateFormatService.displayDate(cell.value)">
          {{ this.dateFormatService.displayDate(cell.value) }}
        </span>
      </ng-template>
    </igx-column>

    <igx-column
      field="webServiceName"
      header="Име на справката"
      [sortable]="true"
      [dataType]="'string'"
    ></igx-column>

    <igx-column
      field="hasError"
      header="Грешка"
      [sortable]="true"
      [dataType]="'boolean'"
    ></igx-column>

    <igx-column
      field="error"
      header="Вид грешка"
      [sortable]="true"
      [dataType]="'string'"
    ></igx-column>
    <igx-column
      field="apiServiceCallId"
      header="Regix_ID"
      [sortable]="true"
      [dataType]="'string'"
    ></igx-column>
    <igx-column
      width="110px"
      header="Действия"
      [sortable]="false"
      [filterable]="false"
      [pinned]="true"
      [disableHiding]="true"
    >
      <ng-template igxCell let-cell="cell">
        <div class="cell-center">
          <div class="d-flex gap-3">
            <button
              class="btn btn-link"
              [title]="'Свали справка'"
              (click)="downloadHtml(cell.rowData.id)"
            >
              <nb-icon pack="fa" icon="download"></nb-icon>
            </button>
          </div>
        </div>
      </ng-template>
    </igx-column>
  </igx-grid>
</nb-card>
