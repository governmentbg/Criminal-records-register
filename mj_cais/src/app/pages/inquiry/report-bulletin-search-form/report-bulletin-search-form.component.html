<nb-card
  class="card-single-page-height"
  accent="primary"
  [formGroup]="fullForm.group"
>
  <nb-card-header class="card-header-shadow">
    <div class="d-flex" style="justify-content: space-between">
      <div class="d-flex align-items-center">
        <h2 class="h4">{{ title }}</h2>
      </div>
      <div class="d-flex">
        <button (click)="onSearch()" nbButton status="primary" type="button">
          <nb-icon
            class="pt-1"
            [icon]="'search'"
            pack="fa"
            title="Търсене"
          ></nb-icon>
          Търсене
        </button>
      </div>
    </div>
  </nb-card-header>
  <nb-card-body class="overflow-scroll">
    <form autocomplete="off">
      <div class="card bg-transparent mt-2">
        <div class="card-body">
          <h6 class="card-title">Данни за бюлетин</h6>
          <div class="row">
            <div class="form-group col-md-3">
              <cais-autocomplete
                [label]="'Бюро съдимост'"
                [inputFormControl]="fullForm.authorityId"
                [parentGroup]="fullForm.group"
                [inputName]="'authorityId'"
                [items]="dbData.authorities"
              >
              </cais-autocomplete>
            </div>
            <div class="form-group col-md-2">
              <cais-input
                [type]="'text'"
                [label]="'Номер'"
                [inputFormControl]="fullForm.registrationNumber"
                [parentGroup]="fullForm.group"
              ></cais-input>
            </div>
            <div class="form-group col-md-2">
              <cais-autocomplete
                [label]="'Вид'"
                [inputFormControl]="fullForm.bulletinType"
                [parentGroup]="fullForm.group"
                [inputName]="'bulletinType'"
                [items]="dbData.bulletinTypes"
              >
              </cais-autocomplete>
            </div>
            <div class="form-group col-md-3">
              <cais-autocomplete
                [label]="'Статус'"
                [inputFormControl]="fullForm.statusId"
                [parentGroup]="fullForm.group"
                [inputName]="'statusId'"
                [items]="dbData.statuses"
              ></cais-autocomplete>
            </div>

            <div class="form-group col-md-2">
              <cais-input
                [type]="'date'"
                [label]="'Датата на постъпване на хартия'"
                [inputFormControl]="fullForm.bulletinReceivedDate"
                [parentGroup]="fullForm.group"
              ></cais-input>
            </div>
          </div>
        </div>
      </div>
      <div class="card bg-transparent mt-2">
        <div class="card-body">
          <h6 class="card-title">Данни за акта</h6>
          <div class="row">
            <div class="form-group col-md-3">
              <cais-autocomplete
                [label]="'Съд, постановил акта'"
                [inputFormControl]="fullForm.decidingAuthId"
                [parentGroup]="fullForm.group"
                [inputName]="'decidingAuthId'"
                [items]="dbData.decidingAuthorities"
              >
              </cais-autocomplete>
            </div>

            <div class="form-group col-md-2">
              <cais-input
                [type]="'text'"
                [label]="'Номер'"
                [inputFormControl]="fullForm.decisionNumber"
                [parentGroup]="fullForm.group"
              ></cais-input>
            </div>

            <div class="form-group col-md-2">
              <cais-autocomplete
                [label]="'Вид'"
                [inputFormControl]="fullForm.decisionTypeId"
                [parentGroup]="fullForm.group"
                [inputName]="'decisionTypeId'"
                [items]="dbData.decisionTypes"
              >
              </cais-autocomplete>
            </div>

            <div class="form-group col-md-2">
              <cais-input
                [type]="'date'"
                [label]="'Дата на издаване'"
                [inputFormControl]="fullForm.decisionDate"
                [parentGroup]="fullForm.group"
              ></cais-input>
            </div>

            <div class="form-group col-md-2">
              <cais-input
                [type]="'date'"
                [label]="'Дата на влизане в сила на акта'"
                [inputFormControl]="fullForm.decisionFinalDate"
                [parentGroup]="fullForm.group"
              ></cais-input>
            </div>
          </div>
        </div>
      </div>

      <div class="card bg-transparent mt-2">
        <div class="card-body">
          <h6 class="card-title">Данни за дело</h6>
          <div class="row">
            <div class="form-group col-md-12">
              <cais-lookup
                [label]="'Деяние'"
                [inputControl]="fullForm.offenceCategory"
                [parentGroup]="fullForm.offenceCategory.group"
                [openFunction]="openOffenceCategoryDialog"
              ></cais-lookup>
            </div>
          </div>
          <div class="row">
            <div class="form-group col-md-3">
              <cais-autocomplete
                [label]="'Вид'"
                [inputFormControl]="fullForm.caseTypeId"
                [parentGroup]="fullForm.group"
                [inputName]="'caseTypeId'"
                [items]="dbData.caseTypes"
              ></cais-autocomplete>
            </div>
            <div class="form-group col-md-3">
              <cais-input
                [type]="'text'"
                [label]="'Номер'"
                [inputFormControl]="fullForm.caseNumber"
                [parentGroup]="fullForm.group"
              ></cais-input>
            </div>
            <div class="form-group col-md-3">
              <cais-input
                [type]="'text'"
                [label]="'Година'"
                [inputFormControl]="fullForm.caseYear"
                [parentGroup]="fullForm.group"
              ></cais-input>
            </div>
          </div>
          <div class="row">
            <div class="form-group col-md-6">
              <cais-autocomplete
                [label]="'Вид наказание'"
                [inputFormControl]="fullForm.sanctCategoryId"
                [parentGroup]="fullForm.group"
                [inputName]="'sanctCategoryId'"
                [items]="dbData.sanctionCategories"
              >
              </cais-autocomplete>
            </div>
            <div class="form-group col-md-3">
              <cais-input
                [type]="'number'"
                [label]="'Размер'"
                [inputFormControl]="fullForm.fineAmount"
                [parentGroup]="fullForm.group"
              ></cais-input>
            </div>
          </div>
        </div>
      </div>

      <div class="card bg-transparent mt-2">
        <div class="card-body">
          <h6 class="card-title">Период</h6>
          <div class="row">
            <div class="form-group col-md-3">
              <cais-input
                [type]="'date'"
                [label]="'От'"
                [inputFormControl]="fullForm.fromDate"
                [parentGroup]="fullForm.group"
              ></cais-input>
            </div>
            <div class="form-group col-md-3">
              <cais-input
                [type]="'date'"
                [label]="'До'"
                [inputFormControl]="fullForm.toDate"
                [parentGroup]="fullForm.group"
              ></cais-input>
            </div>
          </div>
        </div>
      </div>
    </form>
  </nb-card-body>
</nb-card>

<nb-card class="mt-3">
  <cais-report-bulletin-search-overview
    #bulletinReportOverview
    [searchForm]="fullForm"
  >
  </cais-report-bulletin-search-overview>
</nb-card>
