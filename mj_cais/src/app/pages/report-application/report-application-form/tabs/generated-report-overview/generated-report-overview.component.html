<div class="font-weight-bold">Справки</div>
<hr />
<igx-grid
  #statusHistoryGrid
  [height]="null"
  [data]="reports"
  [primaryKey]="'id'"
>
  <igx-column
    field="id"
    header="Идентификатор"
    [sortable]="false"
    [dataType]="'string'"
    [hidden]="true"
  >
  </igx-column>
  <igx-column
    field="registrationNumber"
    header="Рег. номер"
    dataType="string"
    [sortable]="true"
  >
  </igx-column>
  <igx-column
    field="firstSigner"
    header="Подписващ 1"
    dataType="string"
    [sortable]="true"
  >
  </igx-column>

  <igx-column
    field="secondSigner"
    header="Подписващ 2"
    dataType="string"
    [sortable]="true"
  >
  </igx-column>

  <igx-column
    field="validFrom"
    [sortable]="true"
    header="Валидна от"
    dataType="date"
    [formatter]="this.dateFormatService.formatDate"
  >
    <ng-template igxCell let-cell="cell">
      <span [title]="this.dateFormatService.displayDate(cell.value)">
        {{ this.dateFormatService.displayDate(cell.value) }}
      </span>
    </ng-template>
  </igx-column>
  <igx-column
    field="validTo"
    [sortable]="true"
    header="Валидна до"
    dataType="date"
    [formatter]="this.dateFormatService.formatDate"
  >
    <ng-template igxCell let-cell="cell">
      <span [title]="this.dateFormatService.displayDate(cell.value)">
        {{ this.dateFormatService.displayDate(cell.value) }}
      </span>
    </ng-template>
  </igx-column>

  <igx-column
    field="statusName"
    header="Статус"
    dataType="string"
    [sortable]="true"
  >
  </igx-column>
  <igx-column
    width="100px"
    header="Действия"
    [sortable]="false"
    [filterable]="false"
  >
    <ng-template igxCell let-cell="cell">
      <button
        igxButton="icon"
        [title]="'Изтегляне'"
        (click)="printReport(cell.rowData.id)"
      >
        <nb-icon pack="fa" icon="download"></nb-icon>
      </button>

      <ng-container *ngIf="!isForPreview && cell.rowData.statusCode == 'ReadyReport'">
        <button
          igxButton="icon"
          [title]="'Маркирай като доставено'"
          (click)="deliver(cell.rowData.id)"
        >
          <i class="fas fa-check"></i>
        </button>
      </ng-container>

      <ng-container
        *ngIf="
          !isForPreview &&
          (cell.rowData.statusCode != 'CanceledReport' ||
          cell.rowData.statusCode != 'Delivered')
        "
      >
        <button
          igxButton="icon"
          [title]="'Анулиране'"
          (click)="reject(cell.rowData.id)"
        >
          <nb-icon pack="fa" icon="times"></nb-icon>
        </button>
      </ng-container>
    </ng-template>
  </igx-column>
</igx-grid>
